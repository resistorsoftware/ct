- form_for :order, :url => orders_url do |f| 
  -# hook :inside_product_cart_form do
  - if @product.has_variants?
    #product-variants
      %h2= t('variants')
      %ul
        - has_checked = false
        - variants = @product.variants.active.sort_by {|v| v.find_option_by_type("size")}
        - variants.each_with_index do |v,index|
        -  next if v.option_values.empty? || (!v.in_stock && !Spree::Config[:show_zero_stock_products])
        -  checked = !has_checked && (v.in_stock || Spree::Config[:allow_backorders])
        -  has_checked = true if checked
          %li
            %label
              = radio_button_tag "products[#{@product.id}]", v.id, checked, :disabled => !v.in_stock && !Spree::Config[:allow_backorders]
              %span.variant-description
                - if @product.main_taxon == 'Tires'
                  = v.find_option_by_type("size") + " " + v.find_option_by_type("sidewall")
                - else
                  = variant_options v
              - if variant_price_diff v
                %span.price.diff= variant_price_diff v

- content_for :head do
  = javascript_include_tag 'product'
